<!DOCTYPE html>
<html lang="ru">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <title>EVRASIA</title>   
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0/dist/css/bootstrap.min.css" rel="stylesheet" integrity="sha384-9ndCyUaIbzAi2FUVXJi0CjmCapSmO7SnpJef0486qhLnuZ2cdeRhO02iuK6FUUVM" crossorigin="anonymous">
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link rel="stylesheet" href="index.css">  
    <link href="https://fonts.googleapis.com/css2?family=Advent+Pro:ital,wght@0,100..900;1,100..900&family=Caveat:wght@400..700&family=Marck+Script&display=swap" rel="stylesheet">
     <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/meyer-reset/2.0/reset.min.css">
    <!--В примере используется библиотека js-cookie для работы с cookie. Вы можете использовать свое решение-->
    <script type="text/javascript" src="https://cdnjs.cloudflare.com/ajax/libs/js-cookie/2.1.2/js.cookie.js"></script>
    <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/js/bootstrap.bundle.min.js" integrity="sha384-YvpcrYf0tY3lHB60NNkmXc5s9fDVZLESaAA55NDzOxhy9GkcIdslK1eN7N6jIeHz" crossorigin="anonymous"></script>

    <style>
        .card {
            width: 100%; 
        }
        .card-img-top {
            height: 350px; 
            object-fit: cover; 
        }
        .sidebar {
            padding: 20px;
        }
        #bookingFilters {
            white-space: pre-wrap;
        }
        #price-range {
            width: 200px; 
        }
        #bookingMessage {
            margin-top: 10px;
        }
        .carousel-item {
            height: 350px; 
        }
        .carousel-item img {
            height: 100%;
            width: 100%;
            object-fit: cover;
        }
         .cookie-notification {
            position: fixed;
            background-color: rgba(0, 0, 0, .8);
            bottom: 0;
            width: 100%;
            color: white;
            padding: 15px;
            text-align: center; /* Центрируем текст */
        }
        .cookie-notification_hidden_yes {
            display: none;
        }
        .cookie-notification__header {
            margin-bottom: 10px;
            font-size: 23px;
        }
        .cookie-notification__body {
            margin-bottom: 10px;
        }
        .cookie-notification__buttons {
            display: flex;
            justify-content: center; /* Центрируем кнопки */
        }
        .cookie-notification__button {
            margin: 0 10px; /* Добавляем отступ между кнопками */
            padding: 8px 15px;
            background-color: #4CAF50; /* Зеленый цвет кнопки */
            color: white;
            border: none;
            border-radius: 5px;
            cursor: pointer;
        }
    </style>
</head>
<body>
    <header class="text-center">
        <nav class="navbar navbar-expand-lg">
            <div class="container">
              <div class="d-flex align-items-center">
                <a class="navbar-brand" href="#">
                  <img src="logo.svg" alt="" width="90" height="60">
                </a>
            
                <ul class="nav justify-content-center ms-auto">
                  <li class="nav-item">
                    <a class="nav-link" href="services.html">Услуги</a>
                  </li>
                  <li class="nav-item">
                    <a class="nav-link" href="hotel.html">О гостинице</a>
                  </li>
                  <li class="nav-item">
                    <a class="nav-link" href="connection.html">Контакты</a>
                  </li>
                </ul>
              </div>
              <h3 class="ms-3" style="font-family: 'Advent Pro'; font-weight: 400; font-size: 1.2rem;">Eurasia - Ваш помощник для бронирования номеров. Каждое путешествие начинается с комфорта!</h3> <span class="ms-4"> </span>
            </div>
          </nav>
    </header>
    <div class="container mt-4">
        <div class="row justify-content-center">
            <div class="col-md-9">
                <div class="booking-form">
                    <form>
                        <div class="row g-3 align-items-center"> 
                            <div class="col-md-3">
                                <label for="city" class="form-label">Город</label>
                                <input class="form-control" type="text" id="city" value="Eurasia" readonly>
                            </div>
                            <div class="col-md-3">
                                <label for="arrival" class="form-label">Заезд</label>
                                <input class="form-control" type="date" id="arrival" required>
                            </div>
                            <div class="col-md-3">
                                <label for="departure" class="form-label">Выезд</label>
                                <input class="form-control" type="date" id="departure" required>
                            </div>
                            <div class="col-md-3">
                                <label for="guests" class="form-label">Кол-во гостей</label>
                                <select class="form-control" id="guests">
                                    <option value="0">Любое</option> <option value="1">1</option>
                                    <option value="2">2</option>
                                    <option value="3">3</option>
                                    <option value="4">4</option>
                                    <option value="5">5</option>
                                </select>
                            </div>
                        </div>
                    </form>
                </div>
            </div>
        </div>  
        </div>
        <div class="row mt-4" id="rooms-container">
            <div class="col-md-3">
                <div class="sidebar">
                    <h3>Особенности номера</h3>
                    <div class="form-check">
                        <input class="form-check-input" type="checkbox" name="services" id="service1">
                        <label class="form-check-label" for="service1">
                          Сейф в номере
                        </label>
                    </div>
                    <div class="form-check">
                        <input class="form-check-input" type="checkbox" name="services" id="service2">
                        <label class="form-check-label" for="service2">
                          Можно с домашними животными
                        </label>
                    </div>
                    <div class="form-check">
                        <input class="form-check-input" type="checkbox" name="services" id="service3">
                        <label class="form-check-label" for="service3">
                          Кроватка для ребёнка
                        </label>
                    </div>
                    <div class="form-check">
                        <input class="form-check-input" type="checkbox" name="services" id="service5">
                        <label class="form-check-label" for="service5">
                          Wi-Fi
                        </label>
                    </div>
                    <div class="form-check">
                        <input class="form-check-input" type="checkbox" name="services" id="service6">
                        <label class="form-check-label" for="service6">
                          Две спальни
                        </label>
                    </div>
                    <div class="form-check">
                        <input class="form-check-input" type="checkbox" name="services" id="service7">
                        <label class="form-check-label" for="service7">
                          Гостиная
                        </label>
                    </div>
                    <div class="form-check">
                        <input class="form-check-input" type="checkbox" name="services" id="service8">
                        <label class="form-check-label" for="service8">
                          Кухня
                        </label>
                    </div>
                    <div class="form-check">
                        <input class="form-check-input" type="checkbox" name="services" id="service9">
                        <label class="form-check-label" for="service9">
                          Парковка
                        </label>
                    </div>
                    <div class="form-check">
                        <input class="form-check-input" type="checkbox" name="services" id="service10">
                        <label class="form-check-label" for="service10">
                          Вид на море
                        </label>
                    </div>
                    <div class="form-check form-switch">
                        <input class="form-check-input" type="checkbox" name="services" id="breakfast-switch">
                        <label class="form-check-label" for="breakfast-switch">Завтрак в номер</label>
                    </div>
                    <h3>Питание</h3>
                    <div class="form-check">
                        <input class="form-check-input" type="checkbox" name="meal" id="meal1">
                        <label class="form-check-label" for="meal1">
                          Завтрак включен
                        </label>
                    </div>
                    <div class="form-check">
                        <input class="form-check-input" type="checkbox" name="meal" id="meal2">
                        <label class="form-check-label" for="meal2">
                          Обед включен
                        </label>
                    </div>
                    <div class="form-check">
                        <input class="form-check-input" type="checkbox" name="meal" id="meal3">
                        <label class="form-check-label" for="meal3">
                          Ужин включен
                        </label>
                    </div>
                    <div class="form-check">
                        <input class="form-check-input" type="checkbox" name="meal" id="meal4">
                        <label class="form-check-label" for="meal4">
                          Питание за дополнительную плату
                        </label>
                    </div>
                    <div class="form-check">
                        <input class="form-check-input" type="checkbox" name="meal" id="meal5">
                        <label class="form-check-label" for="meal5">
                          Без питания
                        </label>
                    </div>
                    <h3>Количество комнат</h3>
                    <div class="form-check">
                        <input class="form-check-input" type="checkbox" name="rooms" id="rooms1">
                        <label class="form-check-label" for="rooms1">1 комната</label>
                    </div>
                    <div class="form-check">
                        <input class="form-check-input" type="checkbox" name="rooms" id="rooms2">
                        <label class="form-check-label" for="rooms2">2 комнаты</label>
                    </div>
                    <div class="form-check">
                        <input class="form-check-input" type="checkbox" name="rooms" id="rooms3">
                        <label class="form-check-label" for="rooms3">3 комнаты</label>
                    </div>
                    <h3>Цена</h3>
                    <input type="range" id="price-range" min="1000" max="10000" value="1000" step="100">
                    <div id="price-display">1000 - 10000 руб.</div>
                </div>                
            </div>
            <div class="col-md-9 d-flex flex-column" id="rooms-list">
            </div>
        </div>
    </div>
     <!-- Модальное окно для бронирования -->
     <div class="modal fade" id="bookingModal" tabindex="-1" aria-labelledby="bookingModalLabel" aria-hidden="true">
        <div class="modal-dialog">
            <div class="modal-content">
                <div class="modal-header">
                    <h1 class="modal-title fs-5" id="bookingModalLabel">Бронирование номера</h1>
                    <button type="button" class="btn-close" data-bs-dismiss="modal" aria-label="Close"></button> </div>
                <div class="modal-body">
                    <form id="bookingForm">
                        <div class="mb-3">
                            <label for="name" class="form-label">Ваше имя</label>
                            <input type="text" class="form-control" id="name" required>
                        </div>
                        <div class="mb-3">
                            <label for="email" class="form-label">Ваш email</label>
                            <input type="email" class="form-control" id="email" required>
                        </div>
                        <div class="mb-3">
                            <label for="phone" class="form-label">Ваш телефон</label>
                            <input type="tel" class="form-control" id="phone" required>
                        </div>
                        <div class="mb-3">
                            <label for="roomType" class="form-label">Тип номера</label>
                            <input type="text" class="form-control" id="roomType" readonly>
                        </div>
                        <div class="mb-3">
                            <label for="arrivalDate" class="form-label">Дата заезда</label>
                            <input type="text" class="form-control" id="arrivalDate" readonly>
                        </div>
                        <div class="mb-3">
                            <label for="departureDate" class="form-label">Дата выезда</label>
                            <input type="text" class="form-control" id="departureDate" readonly>
                        </div>
                        <div class="mb-3">
                            <label for="bookingFilters" class="form-label">Выбранные фильтры:</label>
                            <div id="bookingFilters"></div>
                        </div>
                        <div class="mb-3">
                            <label for="roomPrice" class="form-label">ИТОГО:</label>
                            <input type="text" class="form-control" id="roomPrice" readonly>
                        </div>
                        <button type="submit" class="btn btn-primary">Подтвердить</button>
                        <div id="bookingMessage" class="mt-3"></div>
                        <button type="button" class="btn btn-success" id="downloadButton" style="display:none; background-color: #837D7E; border: none;">Скачать файл с данными</button>
                    </form>
                </div>
            </div>
        </div>
    </div>
    <script>
    const roomsData = [
        { number: 1, guests: 2, title: "Двухместный номер", description: "Просторный двухместный номер, идеально подходящий для пар или друзей, путешествующих вместе. Оснащен двуспальной или двумя односпальными кроватями, уютной зоной отдыха и всем необходимым для комфортного пребывания. Наслаждайтесь совместными моментами в приятной обстановке.", price: 2500, images: ["https://velesmebel.ru/image/catalog/krovati/selena1chernyj_mahagon(1).jpg", "http://vpiter.com/images/6289.jpg", "https://stroy-podskazka.ru/images/article/orig/2017/10/metallicheskie-odnospalnye-krovati-13.jpg"], services: ["Сейф в номере","Можно с домашними животными","Завтрак в номер","Парковка", "Две спальни"], meal: ["Завтрак включен"], rooms: 2 },
        { number: 2, guests: 1, title: "Одноместный номер", description: "Уютный и комфортный одноместный номер идеально подходит для соло-путешественников. Оснащен одной удобной кроватью, рабочим столом и необходимыми удобствами для комфортного проживания. Идеально для отдыха после насыщенного дня.", price: 2000, images: ["https://betonpogreb.ru/wp-content/uploads/8/5/3/853f16e53e03a375cf87a67554e0e351.jpeg", "https://st.dg-home.ru/upload/iblock/1f4/mramor_i_derevo_v_vannoy_pravila_udachnogo_sochetaniya.jpg"], services: ["Можно с домашними животными"], meal: ["Питание за дополнительную плату"], rooms: 1 },
        { number: 3, guests: 5, title: "Семейный номер", description: "Широкий семейный номер, который с комфортом разместит целую семью. Содержит одну двуспальную и четыре односпальных кровати, а также дополнительные удобства, такие как холодильник и телевизор, а так же кроватку для малыша. Отличный выбор для семейных поездок.", price: 4000, images: ["https://s01.cdn-pegast.net/get/00/3c/d7/2eaef805aa1d6b9dc40d41025daa4f3328170bf376cf884902b8ad0e23/5c6e48cb4f4d0.jpg", "https://avatars.mds.yandex.net/i?id=e49355f11b8a06313e44739f51ad181f_l-5886424-images-thumbs&ref=rim&n=13&w=1600&h=1015", "https://avatars.mds.yandex.net/get-altay/1245631/2a00000167afce82ed5b08f4c90e75b88e23/XXXL"], services: ["Кроватка для ребёнка","Парковка", "Две спальни"], meal: ["Завтрак включен"], rooms: 2 },
        { number: 4, guests: 2, title: "Люкс номер", description: "Роскошный люкс, предлагающий максимальный комфорт и стиль. Оснащен спальней с большой кроватью, отдельной зоной гостиной и приватной ванной комнатой. Идеален для особых случаев и тех, кто хочет порадовать себя высоким уровнем удобства.", price: 5500, images: ["https://amiel.club/uploads/posts/2022-10/1664841481_1-amiel-club-p-interer-nomera-v-gostinitse-krasivo-1.jpg", "https://pro-dachnikov.com/uploads/posts/2021-10/1633405360_13-p-vannaya-komnata-v-eko-stile-foto-13.jpg", "https://avatars.mds.yandex.net/i?id=d19572eeb634e10b0249465e47ef8361_l-4011747-images-thumbs&n=13"], services: ["Сейф в номере", "Завтрак в номер"], meal: ["Завтрак включен", "Обед включен", "Ужин включен","Парковка"], rooms: 2 },
        { number: 5, guests: 1, title: "Комфортный номер", description: "Уютный одноместный номер с всеми удобствами для комфортного проживания. Более просторный номер с двуспальной кроватью, удобным диваном, телевизором, холодильником, бесплатным Wi-Fi, ванной комнатой с душем и ванной.", price: 2000, images: ["https://assets.blackandmilk.co.uk/1920x1080/de2faa1540/space-savng-interior-design-02.jpg", "https://media.teradom.ru/images/0/16527_8.jpg"], services: ["Wi-Fi", "Кухня"], meal: ["Без питания"], rooms: 1 },
        { number: 6, guests: 4, title: "Люкс с видом на море", description: "Элегантный номер с панорамным видом на море, отдельной спальней с большой двуспальной кроватью, просторной гостиной зоной с камином и диваном, телевизором, холодильником, кофемашиной, бесплатным Wi-Fi, ванной комнатой с ванной и душевой кабиной.", price: 10000, images: ["https://img.goodfon.ru/original/1920x1080/4/37/luxury-villa-open-living.jpg", "https://avatars.mds.yandex.net/i?id=03b732b01e25898efbe251a6c8912727_l-12606366-images-thumbs&n=13", "https://avatars.mds.yandex.net/i?id=a504aaab297fcd4caacd6b22b95b851b_l-5248224-images-thumbs&n=13", "https://russia-zov.ru/wp-content/uploads/2022/06/1624003648_20-almode_ru-p-belo-seraya-kukhnya-s-beloi-stoleshnitsei-20.jpg"], services: ["Сейф в номере", "Завтрак в номер","Кроватка для ребёнка","Гостиная","Wi-Fi","Вид на море"], meal: ["Завтрак включен", "Обед включен", "Ужин включен"], rooms: 2 },
        { number: 7, guests: 3, title: "Трехместный номер", description: "Комфортный номер для трех человек, оснащенный тремя односпальными кроватями, телевизором и всем необходимым.", price: 3000, images: ["https://namba.gracery.com/wp-content/uploads/sites/369/2018/12/tripleroom-1920x1080.jpg", "https://bigfoto.name/uploads/posts/2022-02/1645598258_56-bigfoto-name-p-vannaya-sovmeshchennaya-s-tualetom-tsvet-v-87.jpg"], services: ["Wi-Fi","Парковка", "Две спальни"], meal: ["Завтрак включен"], rooms: 1 },
        { number: 8, guests: 2, title: "Номер с балконом", description: "Двухместный номер с собственным балконом и прекрасным видом.", price: 2800, images: ["https://avatars.mds.yandex.net/i?id=0b13426e98455ef0700a87aad5fdad42_l-4146380-images-thumbs&ref=rim&n=13&w=1920&h=1080", "https://tmn.kerama-marazzi.com/upload/iblock/692/0z04y1gyirfm1rwyn1sxs9ybxmlzirom.jpg"], services: ["Wi-Fi", "Балкон"], meal: ["Питание за дополнительную плату"], rooms: 1 },
        { number: 9, guests: 4, title: "Семейный люкс", description: "Просторный семейный люкс с двумя спальнями и гостиной.", price: 6000, images: ["https://archgenerate.com/uploads/projects/5ef50554222773.71572162.jpg", "https://i.pinimg.com/736x/da/bd/c4/dabdc4ad4fb43cfbc033bbc142d668e1--small-guest-bedrooms-kid-bedrooms.jpg", "https://static.tildacdn.com/tild6232-3266-4461-b535-616435386339/------1.jpg", "https://avatars.mds.yandex.net/i?id=469b68252c03665a0391a17b648315d9_l-5194768-images-thumbs&n=13"], services: ["Wi-Fi", "Две спальни", "Гостиная","Парковка", "Две спальни"], meal: ["Завтрак включен"], rooms: 3 },
        { number: 10, guests: 2, title: "Стандартный номер", description: "Простой, но уютный двухместный номер.", price: 2200, images: ["https://bigfoto.name/uploads/posts/2022-03/1647077438_27-bigfoto-name-p-dizain-spalni-minimalizm-v-svetlikh-tonakh-61.jpg", "https://mirplitki.org/upload/bau3d/castle/images/castle0.jpg"], services: ["Wi-Fi"], meal: ["Питание за дополнительную плату","Без питания"], rooms: 1 },
        { number: 11, guests: 1, title: "Эконом номер", description: "Небольшой одноместный номер по доступной цене.", price: 1500, images: ["https://www.zastavki.com/pictures/1600x900/2019_Bedroom_with_a_bed_and_a_soft_stove_by_the_window_132142_25.jpg", "https://avatars.mds.yandex.net/get-mpic/5236698/img_id1214826243784882731.jpeg/orig","https://design.pibig.info/uploads/posts/2023-01/1674415474_design-pibig-info-p-kukhnya-do-potolka-uglovaya-dizain-krasivo-26.jpg"], services: ["Wi-Fi"], meal: ["Питание за дополнительную плату","Без питания"], rooms: 1 },
        { number: 12, guests: 4, title: "Апартаменты", description: "Просторные апартаменты с кухней и спальней.", price: 7000, images: ["https://i.ytimg.com/vi/CBFgUzsgMZI/maxresdefault.jpg", "https://staisha.top/uploads/posts/2023-02/1675310638_staisha-top-p-mebellar-spalni-spalnya-pinterest-65.jpg", "https://via.placeholder.com/350x150"], services: ["Wi-Fi", "Кухня", "Две спальни", "Завтрак в номер"], meal: ["Завтрак включен","Обед включен","Ужин включен"], rooms: 3 }
    ];   

    const roomsContainer = document.getElementById('rooms-list'); // Исправлено ID
    const guestsSelect = document.getElementById('guests');
    const priceRange = document.getElementById('price-range');
    const priceDisplay = document.getElementById('price-display');
    const breakfastSwitch = document.getElementById('breakfast-switch');
    const arrivalInput = document.getElementById('arrival');
    const departureInput = document.getElementById('departure');
    const arrivalDateDisplay = document.getElementById('arrivalDate');
    const departureDateDisplay = document.getElementById('departureDate');
    const roomPriceDisplay = document.getElementById('roomPrice');

    function filterRooms(rooms, filters) {
        return rooms.filter(room => {
            return Object.keys(filters).every(filterKey => {
                const filterValues = filters[filterKey];
                if (filterKey === 'price') {
                    const [min, max] = filterValues;
                    return room.price >= min && room.price <= max;
                } else if (filterKey === 'rooms') {
                    return filterValues.length === 0 || filterValues.includes(room.rooms);
                } else if (filterValues.length === 0) return true;
                else {
                    return filterValues.every(value => {
                        return room[filterKey] && room[filterKey].some(roomValue => roomValue.toLowerCase().includes(value.toLowerCase()));
                    });
                }
            });
        });
    }

    function renderRooms(data) {
        roomsContainer.innerHTML = ''; 
        data.forEach(room => {
            let imageCarousel = "";
            if (room.images && room.images.length > 0) {
              imageCarousel = `
                <div id="carouselExampleCaptions-${room.number}" class="carousel slide">
                  <div class="carousel-inner">`;
              room.images.forEach((img, index) => {
                imageCarousel += `
                    <div class="carousel-item ${index === 0 ? 'active' : ''}">
                      <img src="${img}" class="d-block w-100" alt="Номер ${room.number}">
                    </div>`;
              });
              imageCarousel += `
                  </div>
                  <button class="carousel-control-prev" type="button" data-bs-target="#carouselExampleCaptions-${room.number}" data-bs-slide="prev">
                    <span class="carousel-control-prev-icon" aria-hidden="true"></span>
                    <span class="visually-hidden">Previous</span>
                  </button>
                  <button class="carousel-control-next" type="button" data-bs-target="#carouselExampleCaptions-${room.number}" data-bs-slide="next">
                    <span class="carousel-control-next-icon" aria-hidden="true"></span>
                    <span class="visually-hidden">Next</span>
                  </button>
                </div>`;
            } else {
                imageCarousel = `<img src="placeholder.jpg" class="card-img-top" alt="Номер ${room.number}">`;
            }

            const card = `
                <div class="card mb-4" data-guests="${room.guests}" data-room-number="${room.number}" data-room-price="${room.price}">
                    ${imageCarousel}
                    <div class="card-body">
                        <h2 class="card-title">${room.title}</h2>
                        <p class="card-text">${room.description}</p>
                        <p class="card-text">Цена: ${room.price} руб/cутки</p>
                        <button class="btn btn-primary btn-booking" data-bs-toggle="modal" data-bs-target="#bookingModal" data-room-price="${room.price}">Забронировать</button>
                    </div>
                </div>
            `;
            roomsContainer.insertAdjacentHTML('beforeend', card);
        });
        attachBookingListeners();
    }

    function attachBookingListeners() {
        const bookingButtons = document.querySelectorAll('.btn-booking');
        bookingButtons.forEach(button => {
            button.addEventListener('click', (event) => {
                const card = event.target.closest('.card');
                const roomNumber = card.dataset.roomNumber;
                const roomType = card.querySelector('.card-title').textContent;
                const roomPrice = parseInt(card.dataset.roomPrice);
                const filters = getFilters();
                const arrivalDate = arrivalInput.value;
                const departureDate = departureInput.value;

                const totalPrice = calculateTotalPrice(roomPrice, filters, arrivalDate, departureDate);

                document.getElementById('roomType').value = `Номер ${roomNumber} - ${roomType}`;
                arrivalDateDisplay.value = arrivalDate;
                departureDateDisplay.value = departureDate;
                roomPriceDisplay.value = totalPrice; 
                displayFiltersInModal(filters);
            });
        });
    }

    function calculateTotalPrice(roomPrice, filters, arrivalDate, departureDate) {
        let totalPrice = roomPrice;
        const oneDay = 24 * 60 * 60 * 1000; 
        const diffDays = Math.round(Math.abs((new Date(departureDate) - new Date(arrivalDate)) / oneDay));

        if (document.getElementById('breakfast-switch').checked) {
            totalPrice += diffDays * 300; 
        }
        return totalPrice * diffDays;
    }

    function getFilters() {
        const filters = {};
        const checkboxes = document.querySelectorAll('.sidebar input[type="checkbox"]');
        checkboxes.forEach(checkbox => {
            const groupName = checkbox.name;
            if (!filters[groupName]) filters[groupName] = [];
            if (checkbox.checked) {
                if (groupName === 'rooms') {
                    filters[groupName].push(parseInt(checkbox.id.replace('rooms', '')));
                } else {
                    filters[groupName].push(checkbox.nextElementSibling.textContent.trim());
                }
            }
        });
        const minPrice = parseInt(priceRange.min);
        const maxPrice = parseInt(priceRange.max);
        const value = parseInt(priceRange.value);
        filters.price = [value, maxPrice];
        return filters;
    }

    const checkboxes = document.querySelectorAll('.sidebar input[type="checkbox"]');
    checkboxes.forEach(checkbox => {
        checkbox.addEventListener('change', () => {
            const filters = getFilters();
            let filteredRooms = filterRooms(roomsData, filters);
            const selectedGuests = parseInt(guestsSelect.value);
            filteredRooms = filteredRooms.filter(room => selectedGuests === 0 || room.guests >= selectedGuests);
            renderRooms(filteredRooms);
        });
    });

    guestsSelect.addEventListener('change', () => {
        const filters = getFilters();
        const selectedGuests = parseInt(guestsSelect.value);
        let filteredRooms = roomsData.filter(room => selectedGuests === 0 || room.guests >= selectedGuests);
        filteredRooms = filterRooms(filteredRooms, filters);
        renderRooms(filteredRooms);
    });

    priceRange.addEventListener('input', () => {
        const minPrice = parseInt(priceRange.min);
        const maxPrice = parseInt(priceRange.max);
        const value = parseInt(priceRange.value);
        priceDisplay.textContent = `${value} - ${maxPrice} руб.`;

        const filters = getFilters();
        let filteredRooms = filterRooms(roomsData, filters);
        const selectedGuests = parseInt(guestsSelect.value);
        filteredRooms = filteredRooms.filter(room => selectedGuests === 0 || room.guests >= selectedGuests);
        renderRooms(filteredRooms);
    });

    function displayFiltersInModal(filters) {
        let servicesString = "";
        let mealString = "";
        let roomsString = "";

        if (filters.services && filters.services.length > 0) {
            servicesString = "Услуги: " + filters.services.join(', ');
        } else {
            servicesString = "Услуги: Не выбрано";
        }

        if (filters.meal && filters.meal.length > 0) {
            mealString = "Питание: " + filters.meal.join(', ');
        } else {
            mealString = "Питание: Не выбрано"; 
        }

        if (filters.rooms && filters.rooms.length > 0) {
            roomsString = "Комнат: " + filters.rooms.join(', ') + " ";
        } else {
            roomsString = "Комнат: Не выбрано ";
        }

        const filterString = `В номер входят:\n${servicesString}\n${mealString}\n${roomsString}`;
        document.getElementById('bookingFilters').textContent = filterString;
    }


    renderRooms(roomsData);


    const bookingForm = document.getElementById('bookingForm');
    const downloadButton = document.getElementById('downloadButton');
    bookingForm.addEventListener('submit', function(event) {
        event.preventDefault();
        const name = document.getElementById('name').value;
        const email = document.getElementById('email').value;
        const phone = document.getElementById('phone').value;
        const roomType = document.getElementById('roomType').value;
        const arrivalDate = document.getElementById('arrivalDate').value;
        const departureDate = document.getElementById('departureDate').value;
        const roomPrice = document.getElementById('roomPrice').value;
        const bookingFilters = document.getElementById('bookingFilters').textContent;
        const messageDiv = document.getElementById('bookingMessage');
        const emailRegex = /^[^\s@]+@[^\s@]+\.[^\s@]+$/;
        if (!emailRegex.test(email)) {
            messageDiv.textContent = "Неверный формат email.";
            messageDiv.style.color = "red";
            messageDiv.style.display = 'block';
            return;
        }
        const phoneRegex = /^\+?\d{10,15}$/; 
        if (!phoneRegex.test(phone)) {
            messageDiv.textContent = "Неверный формат номера телефона.";
            messageDiv.style.color = "red";
            messageDiv.style.display = 'block';
            return; 
        }
        const bookingData = `Имя: ${name}\nEmail: ${email}\nТелефон: ${phone}\nТип номера: ${roomType}\nДата заезда: ${arrivalDate}\nДата выезда: ${departureDate}\nИтоговая сумма: ${roomPrice}\nФильтры: ${bookingFilters}`;

        const message = `Номер успешно забронирован!`;
        messageDiv.textContent = message;
        messageDiv.style.color = '#4E4748';
        messageDiv.style.display = 'block';
        downloadButton.style.display = 'block';


        downloadButton.addEventListener('click', function() {
            const blob = new Blob([bookingData], { type: 'text/plain;charset=utf-8' });
            const url = URL.createObjectURL(blob);
            const a = document.createElement('a');
            a.href = url;
            a.download = 'Бронирование EVRASIA.txt';
            a.style.display = 'none';
            document.body.appendChild(a);
            a.click();
            URL.revokeObjectURL(url);
            document.body.removeChild(a);
        });
    });
    // Валидация дат
    arrivalInput.addEventListener('change', validateDates);
    departureInput.addEventListener('change', validateDates);

    function validateDates() {
        const arrivalDate = new Date(arrivalInput.value);
        const departureDate = new Date(departureInput.value);
        const today = new Date();

        if (arrivalDate < today) {
            alert('Дата заезда не может быть раньше текущей даты.');
            arrivalInput.value = ''; 
            return;
        }

        if (departureDate <= arrivalDate) {
            alert('Дата выезда не может быть раньше или равна дате заезда.');
            departureInput.value = ''; 
            return;
        }

        const filters = getFilters();
        let filteredRooms = filterRooms(roomsData, filters);
        const selectedGuests = parseInt(guestsSelect.value);
        filteredRooms = filteredRooms.filter(room => selectedGuests === 0 || room.guests >= selectedGuests);
        renderRooms(filteredRooms);
    }

    function addClass(o, c) {
        var re = new RegExp("(^|\\s)" + c + "(\\s|$)", "g");
        if (!o || re.test(o.className)) {
            return;
        }
        o.className = (o.className + " " + c).replace(/\s+/g, " ").replace(/(^ | $)/g, "");
    }

    function removeClass(o, c) {
        var re = new RegExp('(^|\\s)' + c + '(\\s|$)', 'g');
        if (!o) {
            return;
        }
        o.className = o.className.replace(re, '$1').replace(/\s+/g, ' ').replace(/(^ | $)/g, '');
    }

    function hideMessage() {
        addClass(messageElement, 'cookie-notification_hidden_yes');
    }

    function showMessage() {
        removeClass(messageElement, 'cookie-notification_hidden_yes');
    }

    function saveAnswer() {
        hideMessage();
        Cookies.set('agreement', '1');
    }

    function initCounter() {
        ym(99900466, 'init', {});
        saveAnswer();
    }

    var messageElement = document.querySelector('.cookie-notification');
    if (!Cookies.get('agreement')) {
        showMessage();
        document.querySelector('#yes').addEventListener('click', initCounter);
    } else {
        initCounter();
    }

    // Yandex Metrika (перемещен сюда для корректной работы)
    (function(m,e,t,r,i,k,a){m[i]=m[i]||function(){(m[i].a=m[i].a||[]).push(arguments)};m[i].l=1*new Date();k=e.createElement(t),a=e.getElementsByTagName(t)[0],k.async=1,k.src=r,a.parentNode.insertBefore(k,a)}) (window, document, "script", "https://mc.yandex.ru/metrika/tag.js", "ym");


</script>

<footer class="d-flex justify-content-between align-items-start py-3 my-4 border-top">
<div class="text-start"style="font-family: 'Advent Pro'; font-weight: medium; font-size: 20px;">
    <p class="mb-1 text-body-secondary">Часы работы:</p>
    <p class="mb-2 text-body-secondary">Ресепшен: Круглосуточно</p>
    <p class="mb-3 text-body-secondary">Бронирование: с 09:00 до 21:00</p>
</div>

<div class="text-center mb-3">
    <a href="index.html" class="link-body-emphasis text-decoration-none">
        <img src="Evrasia.svg" alt="Eurasia" width="100" height="80" class="me-2">
    </a>
</div>

<div class="text-end" style="font-family: 'Advent Pro'; font-weight: medium; font-size: 20px;">
    <p class="mb-1 text-body-secondary">Наш адрес:</p>
    <p class="mb-1 text-body-secondary">Россия</p>
     <div class="cookie-notification cookie-notification_hidden_yes">
        <div class="cookie-notification__header">Предупреждение о сборе статистики</div>
        <div class="cookie-notification__body">
       <p>Этот сайт собирает статистику посещения и данные посетителей.</p>
       <p><a href="#">Ссылка на Политику конфиденциальности</a></p>  <!--  Добавьте реальную ссылку -->
        </div>
        <div class="cookie-notification__buttons">
            <button class="cookie-notification__button" id="yes">Я согласен</button>
        </div>
    </div>
</div>
</footer>
</body>
</html>
